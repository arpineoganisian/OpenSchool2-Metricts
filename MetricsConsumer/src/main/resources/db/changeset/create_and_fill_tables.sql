CREATE TABLE IF NOT EXISTS metric (
    id          INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name        VARCHAR(255) NOT NULL,
    description TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS message (
    id          INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    metric_id   INT REFERENCES metric (id) ON DELETE CASCADE,
    value       DOUBLE PRECISION NOT NULL,
    timestamp   TIMESTAMPTZ NOT NULL
);